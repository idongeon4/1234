<!DOCTYPE html>  
<html lang="ko">    
<head>    
    <meta charset="UTF-8">    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">    
    <title>생존 게임</title>    
    <style>    
        body {    
            margin: 0;    
            padding: 20px;    
            background-color: black;    
            color: white;    
            font-family: Arial, sans-serif;    
            text-align: center;    
            min-height: 100vh;    
            display: flex;    
            flex-direction: column;    
            justify-content: center;    
            align-items: center;    
        }  
        .game-container {    
            width: 100%;    
            max-width: 400px;    
        }    
        .timer {    
            font-size: 120px;    
            color: lime;    
            font-weight: bold;    
            margin: 20px 0;    
        }    

        .popup-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }
        
        .popup-window {
            position: absolute;
            background: white;
            border: 2px solid #333;
            border-radius: 5px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
            pointer-events: auto;
            cursor: move;
            user-select: none;
            display: none;
            animation: popupAppear 0.3s ease-out;
        }
        
        @keyframes popupAppear {
            from {
                opacity: 0;
                transform: scale(0.8);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }
        
        .popup-header {
            background: linear-gradient(to bottom, #f0f0f0, #d0d0d0);
            padding: 5px 10px;
            border-bottom: 1px solid #999;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-family: Arial, sans-serif;
            font-size: 12px;
            color: black;
        }
        
        .popup-close {
            background: none;
            border: none;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            padding: 0;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .popup-close:hover {
            background: red;
            color: white;
        }
        
        .popup-image {
            display: block;
            width: 300px;
            height: 200px;
            object-fit: cover;
        }
        
        .popup-image.small {
            width: 200px;
            height: 150px;
        }    

        .stage-title {    
            font-size: 24px;    
            color: white;    
            margin: 20px 0;    
        }    

        .doors {    
            display: flex;    
            justify-content: center;    
            gap: 30px;    
            flex-wrap: wrap;    
            margin: 30px 0;    
        }    

        .door {    
            width: 120px;    
            height: 200px;    
            background: linear-gradient(to right, #f8f8f8, #ffffff, #f0f0f0);    
            color: black;    
            border: 3px solid #ccc;    
            border-radius: 5px;    
            font-size: 36px;    
            font-weight: bold;    
            cursor: pointer;    
            display: flex;    
            align-items: center;    
            justify-content: center;    
            transition: all 0.3s;    
            position: relative;    
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);    
        }    

        .door::before {    
            content: '';    
            position: absolute;    
            right: 15px;    
            top: 50%;    
            transform: translateY(-50%);    
            width: 12px;    
            height: 12px;    
            background: #888;    
            border-radius: 50%;    
            box-shadow: 0 2px 4px rgba(0,0,0,0.3);    
        }    

        .door::after {    
            content: '';    
            position: absolute;    
            right: 12px;    
            top: 50%;    
            transform: translateY(-50%);    
            width: 6px;    
            height: 6px;    
            background: #555;    
            border-radius: 50%;    
        }    

        .door:hover {    
            transform: scale(1.02);    
            box-shadow: 0 6px 12px rgba(0,0,0,0.4);    
        }    

        .door:active {    
            transform: scale(0.98);    
        }    

        .death-container, .success-container {    
            position: relative;    
            display: flex;    
            flex-direction: column;    
            align-items: center;    
        }    

        .death-gif, .success-gif {    
            max-width: 100%;    
            width: 350px;    
            height: 250px;    
            object-fit: cover;    
            border-radius: 10px;    
            border: 2px solid white;    
            margin-bottom: 20px;    
        }    

        .death-message {    
            font-size: 48px;    
            color: red;    
            font-weight: bold;    
            margin: 20px 0;    
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);    
            position: absolute;    
            top: 50%;    
            left: 50%;    
            transform: translate(-50%, -50%);    
            background: rgba(0,0,0,0.7);    
            padding: 20px;    
            border-radius: 10px;    
            z-index: 10;    
        }    

        .success-message {    
            font-size: 48px;    
            color: lime;    
            font-weight: bold;    
            margin: 50px 0;    
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);    
        }    

        .restart-btn {    
            background-color: #333;    
            color: white;    
            border: 2px solid white;    
            padding: 15px 30px;    
            font-size: 18px;    
            border-radius: 10px;    
            cursor: pointer;    
            margin-top: 30px;    
        }    

        .restart-btn:hover {    
            background-color: white;    
            color: black;    
        }    

        @media (max-width: 480px) {    
            .timer {    
                font-size: 60px;    
            }    
                
            .death-message, .success-message {    
                font-size: 32px;    
            }    
                
            .door {    
                width: 100px;    
                height: 160px;    
                font-size: 28px;    
            }    

            .doors {    
                gap: 20px;    
            }    

            .death-gif, .success-gif {    
                width: 280px;    
                height: 200px;    
            }    
        }
    </style>  
</head>    
<body>    
    <div class="game-container">    
        <div id="timer-container">    
            <div class="timer" id="timer">20</div>    
        </div>  
        
        <!-- 팝업 이미지들 -->
        <div class="popup-container" id="popup-container">
            <div class="popup-window" id="popup1" style="top: 80px; left: 150px; z-index: 3;">
                <div class="popup-header">
                    <span class="popup-title">피난안내도 | Emergency Evacuation Map</span>
                    <button class="popup-close" onclick="closePopup('popup1')">×</button>
                </div>
                <img src="https://i.postimg.cc/y6mncp0H/11.jpg" alt="팝업1" class="popup-image">
            </div>
            
            <div class="popup-window" id="popup2" style="top: 200px; left: 350px; z-index: 2;">
                <div class="popup-header">
                    <span class="popup-title">스팸</span>
                    <button class="popup-close" onclick="closePopup('popup2')">×</button>
                </div>
                <img src="https://i.postimg.cc/SNVrtXZ1/0.jpg" alt="팝업2" class="popup-image small">
            </div>
            
            <div class="popup-window" id="popup3" style="top: 300px; left: 100px; z-index: 1;">
                <div class="popup-header">
                    <span class="popup-title">광고</span>
                    <button class="popup-close" onclick="closePopup('popup3')">×</button>
                </div>
                <img src="https://i.postimg.cc/DwZgV2Hv/55.jpg" alt="팝업3" class="popup-image small">
            </div>
        </div>    
        <div id="game-content">    
            <!-- 게임 내용이 여기에 표시됩니다 -->    
        </div>
    </div>    
    
    <script>    
        let currentStage = 0;    
        let gameStarted = false;    
        let popupTimers = [];
            
        // 팝업을 순차적으로 띄우기
        function showPopupsSequentially() {
            // 모든 팝업 숨기기
            document.getElementById('popup1').style.display = 'none';
            document.getElementById('popup2').style.display = 'none';
            document.getElementById('popup3').style.display = 'none';
            
            // 첫 번째 팝업 - 즉시
            popupTimers.push(setTimeout(() => {
                if (!gameStarted) {
                    document.getElementById('popup1').style.display = 'block';
                }
            }, 300));
            
            // 두 번째 팝업 - 0.5초 후
            popupTimers.push(setTimeout(() => {
                if (!gameStarted) {
                    document.getElementById('popup2').style.display = 'block';
                }
            }, 800));
            
            // 세 번째 팝업 - 1초 후
            popupTimers.push(setTimeout(() => {
                if (!gameStarted) {
                    document.getElementById('popup3').style.display = 'block';
                }
            }, 1300));
        }
            
        // 타이머 시작    
        function startTimer() {    
            let timeLeft = 20;    
            const timerElement = document.getElementById('timer');    
                
            const countdown = setInterval(() => {    
                timeLeft--;    
                timerElement.textContent = timeLeft;    
                    
                if (timeLeft <= 0) {    
                    clearInterval(countdown);    
                    closeAllPopups();
                    startGame();    
                }    
            }, 1000);    
        }    
            
        // 게임 시작    
        function startGame() {    
            document.getElementById('timer-container').style.display = 'none';    
            document.getElementById('popup-container').style.display = 'none';    
            gameStarted = true;    
            currentStage = 1;    
            showStage1();    
        }    
            
        // 1단계    
        function showStage1() {    
            const gameContent = document.getElementById('game-content');    
            gameContent.innerHTML = `    
                <div class="stage-title">1단계</div>    
                <div class="doors">    
                    <button class="door" onclick="chooseStage1('A')">A</button>    
                    <button class="door" onclick="chooseStage1('B')">B</button>    
                </div>    
            `;    
        }    
            
        function chooseStage1(door) {    
            if (door === 'B') {    
                showDeathMessage('사자에게 먹혔습니다', 'https://i.postimg.cc/bJ1pY97T/Lion-Roar-GIF-Lion-Roar-King-Of-The-Jungle-Discover-Share-GIFs.gif');    
            } else if (door === 'A') {    
                showStage2();    
            }    
        }    
            
        // 2단계    
        function showStage2() {    
            currentStage = 2;    
            const gameContent = document.getElementById('game-content');    
            gameContent.innerHTML = `    
                <div class="stage-title">2단계</div>    
                <div class="doors">    
                    <button class="door" onclick="chooseStage2('A')">A</button>    
                    <button class="door" onclick="chooseStage2('B')">B</button>    
                </div>    
            `;    
        }    
            
        function chooseStage2(door) {    
            if (door === 'A') {    
                showDeathMessage('독가스에 죽었습니다', 'https://i.postimg.cc/nrkxBcc9/GIF-20250720-093022-789.gif');    
            } else if (door === 'B') {    
                showStage3();    
            }    
        }    
            
        // 3단계    
        function showStage3() {    
            currentStage = 3;    
            const gameContent = document.getElementById('game-content');    
            gameContent.innerHTML = `    
                <div class="stage-title">3단계</div>    
                <div class="doors">    
                    <button class="door" onclick="chooseStage3('A')">A</button>    
                    <button class="door" onclick="chooseStage3('B')">B</button>    
                    <button class="door" onclick="chooseStage3('C')">C</button>    
                </div>    
            `;    
        }    
            
        function chooseStage3(door) {    
            if (door === 'A') {    
                showDeathMessage('불에 타죽었습니다', 'https://i.postimg.cc/T1GGKWGX/e0a9fef4fa568fd2fb5b70ae2640a55e46005eba.gif');    
            } else if (door === 'C') {    
                showDeathMessage('사자에게 먹혔습니다', 'https://i.postimg.cc/bJ1pY97T/Lion-Roar-GIF-Lion-Roar-King-Of-The-Jungle-Discover-Share-GIFs.gif');    
            } else if (door === 'B') {    
                showStage4();    
            }    
        }    
            
        // 4단계    
        function showStage4() {    
            currentStage = 4;    
            const gameContent = document.getElementById('game-content');    
            gameContent.innerHTML = `    
                <div class="stage-title">4단계</div>    
                <div class="doors">    
                    <button class="door" onclick="chooseStage4('A')">A</button>    
                    <button class="door" onclick="chooseStage4('B')">B</button>    
                </div>    
            `;    
        }    
            
        function chooseStage4(door) {    
            if (door === 'B') {    
                showDeathMessage('살인마에게 살해당했습니다', 'https://i.postimg.cc/CK3wVQQ5/happy-halloween-knife.gif');    
            } else if (door === 'A') {    
                showSuccessMessage();    
            }    
        }    
            
        // 사망 메시지 표시    
        function showDeathMessage(message, gifUrl) {    
            const gameContent = document.getElementById('game-content');    
            gameContent.innerHTML = `    
                <div class="death-container">    
                    <img src="${gifUrl}" alt="사망 GIF" class="death-gif">    
                    <div class="death-message">${message}</div>    
                </div>    
                <button class="restart-btn" onclick="restartGame()">다시 시작</button>    
            `;    
        }    
            
        // 성공 메시지 표시    
        function showSuccessMessage() {    
            const gameContent = document.getElementById('game-content');    
            gameContent.innerHTML = `    
                <div class="success-message">축하합니다<br>생존하셨습니다</div>    
                <button class="restart-btn" onclick="restartGame()">다시 시작</button>    
            `;    
        }    
            
        // 팝업 닫기
        function closePopup(popupId) {
            document.getElementById(popupId).style.display = 'none';
        }
        
        // 모든 팝업 닫기
        function closeAllPopups() {
            // 모든 팝업 타이머 정리
            popupTimers.forEach(timer => clearTimeout(timer));
            popupTimers = [];
            
            document.getElementById('popup1').style.display = 'none';
            document.getElementById('popup2').style.display = 'none';
            document.getElementById('popup3').style.display = 'none';
        }
        
        // 팝업 드래그 기능
        function makeDraggable(element) {
            let pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
            
            element.querySelector('.popup-header').onmousedown = dragMouseDown;
            
            function dragMouseDown(e) {
                e = e || window.event;
                e.preventDefault();
                pos3 = e.clientX;
                pos4 = e.clientY;
                document.onmouseup = closeDragElement;
                document.onmousemove = elementDrag;
            }
            
            function elementDrag(e) {
                e = e || window.event;
                e.preventDefault();
                pos1 = pos3 - e.clientX;
                pos2 = pos4 - e.clientY;
                pos3 = e.clientX;
                pos4 = e.clientY;
                element.style.top = (element.offsetTop - pos2) + "px";
                element.style.left = (element.offsetLeft - pos1) + "px";
            }
            
            function closeDragElement() {
                document.onmouseup = null;
                document.onmousemove = null;
            }
        }    
            
        // 게임 재시작    
        function restartGame() {    
            currentStage = 0;    
            gameStarted = false;    
                
            document.getElementById('timer-container').style.display = 'block';    
            document.getElementById('popup-container').style.display = 'block';
            document.getElementById('timer').textContent = '20';    
            document.getElementById('game-content').innerHTML = '';    
                
            showPopupsSequentially();
            startTimer();    
        }
        
        // 페이지 로드 시 타이머 시작    
        window.addEventListener('load', () => {    
            // 팝업들을 드래그 가능하게 만들기
            makeDraggable(document.getElementById('popup1'));
            makeDraggable(document.getElementById('popup2'));
            makeDraggable(document.getElementById('popup3'));
            
            showPopupsSequentially();
            startTimer();    
        });    
    </script>  
</body>    
</html>